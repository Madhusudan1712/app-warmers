name: Keep service Warm

on:
  schedule:
    - cron: "*/5 * * * *"    # every 5 minutes (UTC)
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    strategy:
      matrix:
        url:
          - https://api.authcenter.madhusudan.space/healthz
          - https://api.authcenter.madhusudan.space/actuator/health
          - https://authcenter.madhusudan.space/            # frontend root
          - https://dev.madhusudan.space/
    steps:
      - name: HEAD ${{ matrix.url }}
        run: |
          curl -A "keepalive-bot" -sS -I -L \
            -m 10 --retry 2 --retry-connrefused --retry-delay 2 \
            "${{ matrix.url }}?t=$(date +%s)" || true
